<template>
  <div class="right-drawer">
    <div class="header">Members ({{ serverMembers.length }})</div>
    <transition name="fade" mode="out-in">
      <div class="members" :key="server_id">
        <virtual-list :size="260" :remain="40" :variable="true">
          <div
            class="role"
            v-for="role in roleWithMembers"
            :key="role.role.id"
            :style="{ height: (18 + (role.members.length * 40)) +'px' }"
          >
            <div class="tab" :style="{ height: '18px' }">
              {{ role.role.name }} ({{ role.members.length }})
            </div>
            <ServerMemberTemplate
              v-for="serverMember in role.members"
              :key="serverMember.member.uniqueID"
              :serverMember="serverMember"
              :style="{ height: '40px' }"
            />
          </div>
          <div class="tab" :style="{ height: '18px' }">
            Online ({{ onlineMembersWithNoRoles.length }})
          </div>
          <ServerMemberTemplate
            v-for="serverMember in onlineMembersWithNoRoles"
            :key="serverMember.member.uniqueID"
            :serverMember="serverMember"
            :style="{ height: '40px' }"
          />
          <div class="tab" :style="{ height: '18px' }">
            Offline ({{ offlineMembers.length }})
          </div>
          <ServerMemberTemplate
            v-for="serverMember in offlineMembers"
            :key="serverMember.member.uniqueID"
            :serverMember="serverMember"
            :style="{ height: '40px' }"
          />
        </virtual-list>
      </div>
    </transition>
  </div>
</template>